<!DOCTYPE html>
  <html>
    <head>
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <!-- <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/> -->

      <!-- Compiled and minified CSS -->
      <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" media="screen,projection">

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <body>
      <div class="container">
        <div class="row">
          <div class="col s12 m6 push-m3">
            <h1 class="center-align">CS:GO</h1>
          </div>
        </div>
        <div class="row">
          <div class="col s12 m6 push-m3">
            <div class="progress blue lighten-5">
              <div class="indeterminate blue"></div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12 m6 push-m3">
            <!-- Page Content goes here -->
            <ul class="collection">
              <!--
                <li class="collection-item avatar">
                <img src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/avatars/94/9422a83440566e76091b555e4248789023f20c00_medium.jpg" alt="" class="circle z-depth-3">
                <span class="title">ColorGamer</span>
                <a href="#!" class="secondary-content"><i class="material-icons green-text">brightness_1</i></a>
              </li>

              <li class="collection-item avatar">
                <img src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/avatars/9b/9bb57dbb46797890e48c73f0e35be3e5efc903f0_medium.jpg" alt="" class="circle z-depth-3">
                <span class="title">t1gr0u_m</span>
                <p>Last seen: 2021-01-26 19:13:44<br>
                </p>
                <a href="#!" class="secondary-content"><i class="material-icons red-text">brightness_1</i></a>
              </li>
              -->
            </ul>
          </div>
        </div>
      </div>

      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
      <script type="text/javascript">
        window.addEventListener('load', function () {
          fetch('/.netlify/functions/lambda')
            .then(response => response.json())
            // .then(j => {
            //   console.log(' -- j -- ', j)
            //   return j
            // })
            .then(players => {
              if (players && players.length > 0) {
                players.map(player => {
                  $(`<li class="collection-item avatar"><img src="${player.avatar}" alt="" class="circle z-depth-3"><span class="title">${player.name}</span>${player.alive ? '' : `<p>Last seen: ${player.lastconn}<br></p>`}<a href="#!" class="secondary-content"><i class="material-icons ${player.alive ? 'green' : 'red'}-text">brightness_1</i></a></li>`).appendTo('.collection')
                })
                $('.progress').hide()
              }
            })
      })
      </script>
      <!--JavaScript at end of body for optimized loading-->
      <!-- Compiled and minified JavaScript -->
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    </body>
  </html>
